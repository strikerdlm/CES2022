#include <SD.h>  // include the SD library
const int chipSelect = 4;  // define the chip select pin for the SD card
File dataFile;  // create a file object

void setup() {
  Serial.begin(9600);  // start the serial connection
  while (!Serial) {;}  // wait for the serial connection to be established

  Serial.print("Initializing SD card...");
  if (!SD.begin(chipSelect)) {  // initialize the SD card
    Serial.println("SD card initialization failed!");
    return;
  }
  Serial.println("SD card initialized.");
}

void loop() {
  int radiationLevel = readRadiationSensor();  // read the radiation level from the sensor
  Serial.print("Radiation level: ");
  Serial.println(radiationLevel);

  dataFile = SD.open("radiation_data.csv", FILE_WRITE);  // open the file for writing
  if (dataFile) {  // if the file is available for writing
    dataFile.print(radiationLevel);  // write the radiation level to the file
    dataFile.println();  // add a new line character
    dataFile.close();  // close the file
    Serial.println("Data written to file.");
  } else {
    Serial.println("Error opening file for writing.");
  }
  delay(1000);  // wait for one second before reading the sensor again
}

int readRadiationSensor() {
  // code for reading the radiation sensor goes here
  return radiationLevel;
}
